<html lang="en">
<!--
    Shannon Murray
    Jarod Jones
    Jesse Buhler
    Joshua Card
    Zachary Sterling 
    Brita Szymanski

Project 2 - Work as a Team

Project Description: ...

-->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project 2 - Work as a Team</title>
    <style>
        body
        {
            /*
            #17408B - blue
            #C9082A - red
            #FFFFFF - white
            */
            background-image: url("wooden-basketball-court-wallpaper-mural.jpg");
            background-size:cover;
        }

        #intro
        {
            text-align: center;
        }

        #mainContainer
        {
            overflow: auto;
        }

        .teams
        {
            background-color: #17408B;
            width: 40%;
            font-family: Arial, Helvetica, sans-serif;
            font-size: larger;
            font-weight: bold;
            color: white;
            margin-left: 10px;
            padding: 10px;
            float: left;
            display: block;
        }

        li
        {
            font-size: medium;
            font-weight: normal;
            list-style: circle;
        }

        #teamList
        {
            display: block;
        }

        #inputButton
        {
            float: left;
            width: 30%;
            vertical-align: middle;
            height: auto;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 35%;
            margin-left: 15%;
        }

        input
        {
            vertical-align: middle;
        }

        #rightSide
        {
            float: left;
            width: 15%;
            height: 35%;
        }

    </style>
</head>
<body>
    <!--Top Intro Code-->
    <div id="intro">
        <h1>Welcome to Basketball Season Simulator!</h1>
        <h3>Instructions</h3>
        <h4>Pick a team to root for from the list, click the "Play Game" button, and see how well your team does!</h4>
    </div>

    <!--This HTML code was given in the assignment description-->
    
    <div id="mainContainer">
        <div class="teams">
            Teams:
            <br>
            <ul id="teamList">
                <li>BYU</li>
                <li>Gonzaga</li>
                <li>Loyola</li>
                <li>Pacific</li>
                <li>Pepperdine</li>
                <li>Portland</li>
                <li>Saint Marys</li>
                <li>San Diego</li>
                <li>San Francisco</li>
                <li>Santa Clara</li>
            </ul>
        </div>

        <!--<br><br-->
        <div id="inputButton">
            <input type="button" value="Play Game" onclick="playGame()">
        </div>
        <div id="rightSide">
            <!--<br><br>-->
            <p>Season Results:</p>
            <p id="output"></p>  
        </div>
    </div>
    <footer>
        Footer Test
    </footer>

    <script>

    class Team 
    {
        teamName;
        wins = 0;
        losses = 0;
        winLossPct = 0;
        games = [];

        constructor(pTeamName) 
        {
            this.teamName = pTeamName;
        }

        //Getters and setters 
        getTeam(){
            return this.teamName;
        }
        setTeam(myTeamName){
            this.teamName = myTeamName;
        }
        //Confused as to how this one is different from the calculate one.
        //Double check this.. may have made an error or the wording is just off.
        setWinsLosses(myWins, myLosses){
            this.wins = this.wins + myWins;
            this.losses = this.losses + myLosses;
            this.winLossPct = (this.wins / (this.wins + this.losses));
        }
        getWins(){
            return this.wins;
        }
        getLosses(){
            return this.losses;
        }
        //I am assuming we will want to round this later
        calcWinLossPct(){
            this.winLossPct = (this.wins / (this.wins + this.losses));
        }



    }
    //Create "Team" class
        //Instance variables/attributes:
        /*  teamName; (string)
            wins; (int)
            losses; (int)
            winLossPct; (double)
            games; (array of Game objects)
        */

        //Methods 
        /*  getTeam - when called, returns team name
            setTeam - when called, recieves 1 parameter used to set the "teamName"
            setWinsLosses - when called, recieves 2 parameters used to set the "wins" and "losses";
                            "wins" is the first parameter, "losses" is the second
                            This method will also calculate the "winLossPct"
            getWins - when called, return number of wins ("wins")
            getLosses - when called, return number of losses ("losses")
            calcWinLossPct - calculates and updates "winLossPct"
        */

    class BasketballTeam extends Team
    {
        totalPointsFor = 0;
        totalPointsAgainst = 0;
        
        constructor(pTeamName)
        {
            super(pTeamName);
        }

        addPointsFor(pointsToAdd){
            this.totalPointsFor = this.totalPointsFor + pointsToAdd;
        }
        addPointsAgainst(oppPointsToAdd){
            this.totalPointsAgainst = this.totalPointsAgainst + oppPointsToAdd;
        }
        getAllPoints(){
            var pointOutput;
            pointOutput = "Points for " + this.totalPointsFor + " and Points Against " + this.totalPointsAgainst;
            return pointOutput;
        }
    }

    //Create "BasketballTeam" class that inherits from the "Team" class

        //Make sure to call parent class!
        //Instance Variables/Attributes
        /*  totalPointsFor; (int)
            totalPointsAgainst; (int)
        */
        //Methods
        /*  addPointsFor - when called, receives 1 (int) parameter; this value is added to the "TotalPointsFor" attribute
            addPointsAgainst - when called, receives 1 (int) parameter; this value is added to the "TotalPointsAgainst" attribute
            getAllPoints = when called, return a string with the "totalPointsFor" and the "totalPointsAgainst" like this:
                            EXAMPLE:
                            "Points for XX and Points Against XX" 
                            "Points for " + totalPointsFor + " and Points Against " + totalPointsAgainst
                            */

    class Game
    {
        myScore = 0; //Added 0
        theirScore = 0; //Added 0
        winOrLoss;

        constructor(ourScore, oppScore, outcome)
        {
            this.myScore = ourScore;
            this.theirScore = oppScore;
            this.winOrLoss = outcome;
        }
    }
    
    //Create "Game" class which will be an array of game objects IN the "Team" class
        //Instance Variables/Attributes
        /*  myScore; (int)
            theirScore; (int)
            winOrLoss; (string- W or L)
        
        This class should have a constructor that recieves all 3 parameters to populate the attributes
            (myScore, theirScore, winOrLoss)
        */


        function playGame()
        {
            var wccTeams = ["BYU", "Gonzaga", "Loyola", "Pacific", "Pepperdine","Portland", "Saint Marys", "San Diego", "San Francisco", "Santa Clara"];
            var teamObjects = [];
            var iOuter;
            var iInner;

            //Creates an array of BasketballTeam objects using the given Team names
            for (var i = 0; i < wccTeams.length; i++)
            {
                teamObjects[i] = new BasketballTeam(wccTeams[i]);
                //alert(teamObjects[i].teamName);
            }

            //Each Team plays against the other 9 Teams
            for (iOuter = 0; iOuter < teamObjects.length; iOuter++)
            {
                for (iInner = 0; iInner < teamObjects.length; iInner++)
                {
                    //Can't have the Team play itself
                    if (iInner != iOuter)
                    {
                        var ourScore;
                        var oppScore;
                        var iCount; 
                        var outcome;

                        ourScore = Math.floor(Math.random()*101);
                        oppScore = Math.floor(Math.random()*101);

                        //Assumes the outer Team will be at home...
                        ourScore = ourScore + 5 //Not important, but, couldn't we just add this to the random number generator line in 233?

                        //Determine whether the game was a win, loss, or tie, and adjust win counter as necessary
                        if (ourScore > oppScore)
                        { 
                            outcome = "W"
                        }
                        else if (ourScore < oppScore)
                        { 
                            outcome = "L"
                        }
                        else 
                        {
                            //Variables relevant to the "tied" scenario
                            var bTied = true;
                            var iOverTime = 1; //Why do we need to know how many overtimes there has been?

                            //Overtime - generate new scores and recompare until there is a win or loss
                            while (bTied == true)
                            {
                                ourScore = ourScore + Math.floor(Math.random()*16);
                                oppScore = oppScore + Math.floor(Math.random()*16);

                                if (ourScore > oppScore)
                                {  
                                    outcome = "W"
                                    bTied = false;
                                }
                                else if (ourScore < oppScore)
                                { 
                                    outcome = "L"
                                    bTied = false;
                                }
                                //If scores are still tied, loop is not broken and teams go into overtime again
                                else 
                                { iOverTime = iOverTime + 1; }
                            }
                        }
                        //Saves game to the home team
                        teamObjects[iOuter].games.push(new Game(ourScore, oppScore, outcome));

                        //Add points for and against to the home team.
                        teamObjects[iOuter].addPointsFor(ourScore);
                        teamObjects[iOuter].addPointsAgainst(oppScore);

                        //Add points for and against to the away team.
                        teamObjects[iInner].addPointsFor(oppScore);
                        teamObjects[iInner].addPointsAgainst(ourScore);

                        //Updates the wins and losses for both teams
                        if( outcome === "W"){
                            teamObjects[iOuter].setWinsLosses(1,0);
                            teamObjects[iInner].setWinsLosses(0,1);
                            //Caluclate the win loss %
                            teamObjects[iOuter].calcWinLossPct();
                            teamObjects[iInner].calcWinLossPct();
                        }
                        else{
                            teamObjects[iOuter].setWinsLosses(0,1);
                            teamObjects[iInner].setWinsLosses(1,0);
                            //Caluclate the win loss %
                            teamObjects[iOuter].calcWinLossPct();
                            teamObjects[iInner].calcWinLossPct();
                        }

                        //Save game to the away team
                        var oppOutcome;
                        if (outcome == "W")
                            { oppOutcome = "L"; }
                        else if (outcome == "L") //Could this just be an else statement?
                            { oppOutcome = "W"; }

                        teamObjects[iInner].games.push(new Game(oppScore, ourScore, oppOutcome));

                        
                        /*When the game is over you will update the totalPointsFor and the totalPointsAgainst attributes 
                        by calling the methods (NOT using the attribute).

                        You will also update the wins and the losses for each team as a game is completed. 
                        You will call the calcWinLossPct method to update the winLossPct attribute.

                        You will also need to add a new game object to the games attribute for the team and make sure the constructor 
                        is appropriately called to populate myScore, theirScore, and winOrLoss. */



                        //So this is working, taking 1 team at a time and pitting them against every other team - 
                        //assuming the iOuter team is the home team and adding the game object to that team; 
                        //Should the game object be added to both the home team and the away team?
                        /*
                        alert(teamObjects[iOuter].teamName + " = " + teamObjects[iOuter].games[(teamObjects[iOuter].games.length - 1)].myScore + "\n" + 
                                teamObjects[iInner].teamName + " = " + teamObjects[iOuter].games[(teamObjects[iOuter].games.length - 1)].theirScore + "\n" +
                                teamObjects[iOuter].games[(teamObjects[iOuter].games.length - 1)].winOrLoss + "\n" + "\n" +
                                "This game object is being stored to the home team: " + teamObjects[iOuter].teamName);

                        alert(teamObjects[iInner].teamName + " = " + teamObjects[iInner].games[(teamObjects[iInner].games.length - 1)].myScore + "\n" +
                                teamObjects[iOuter].teamName + " = " + teamObjects[iInner].games[(teamObjects[iInner].games.length - 1)].theirScore + "\n" + 
                                teamObjects[iInner].games[(teamObjects[iInner].games.length - 1)].winOrLoss + "\n" + "\n" + 
                                "This game object is being stored to the away team: " + teamObjects[iInner].teamName);
                        */
                        /*alert(teamObjects[iOuter].teamName + " " + teamObjects[iOuter].wins + "/" + (teamObjects[iOuter].losses + teamObjects[iOuter].wins) + " " + 
                                teamObjects[iOuter].winLossPct + "\n" +
                                teamObjects[iInner].teamName + " " + teamObjects[iInner].wins + "/" + (teamObjects[iInner].losses + teamObjects[iInner].wins) + " " + 
                                teamObjects[iInner].winLossPct);
                        */
                    }
                }
            }

            //Bubble sort
            var sHoldTeam;
            var iHoldWins;
            for (i1 = 0; i1 < teamObjects.length - 1; i1++)
            {
                for (i2 = i1 + 1; i2 < teamObjects.length; i2++)
                {
                    if (teamObjects[i1].getWins() < teamObjects[i2].getWins())
                    {

                        //Set hold for team that is getting moved up
                        iHoldWins = teamObjects[i2];
                        
                        //Move team that needs to be moved down
                        teamObjects[i2] = teamObjects[i1];
                        
                        //Move team that needs to be moved up using the holding variable
                        teamObjects[i1] = iHoldWins;
                        
                    }
                }
            }
            var output = [];
            for (i=0; i < teamObjects.length; i++)
            {
            output[i] = teamObjects[i].teamName + " " + teamObjects[i].wins + " " + (teamObjects[i].winLossPct * 100).toFixed(2) + "%";
            }
            document.getElementById("output").innerHTML = output.join("<br>");
        }


/*
When the user clicks on the Play Game button you need to simulate an entire season.

You will first create an array of team objects for each team displayed on the html form in the WCC group.

Each team will play the other team 2 times, once as the home team and once as the visitor. 
The home team gets an extra 5 points. You will generate random numbers for each of the teams from 0 to 100. 
If there is a tie, you will play an overtime that generates a new random number score up to 15 points. 
This score will be added to the previous score. Do NOT add the extra bonus of 5 points for home teams during the overtime portion. 
If there is another tie, do another overtime period generating 2 new random numbers and adding it to the total score. 
Keep doing this until there is no tie.

When the game is over you will update the totalPointsFor and the totalPointsAgainst attributes 
by calling the methods (NOT using the attribute).

You will also update the wins and the losses for each team as a game is completed. 
You will call the calcWinLossPct method to update the winLossPct attribute.

You will also need to add a new game object to the games attribute for the team and make sure the constructor 
is appropriately called to populate myScore, theirScore, and winOrLoss.

Each team will play the other teams in the list 2 times but they will not play each other more than that.

Once the season is over you will sort the arrays based upon the wins and display all of the teams 
dynamically to the output "p" tag.

Make sure you use arrays of objects. Make sure you add appropriate comments. 
The assignment requirements are worth 90% so go the extra mile and make it look good for the extra 10 points.

Only 1 per team needs to be submitted. Do NOT submit more than that. 
Only people that worked on the project get their name in the submission box for the group.
*/
    </script>


</body>
</html>